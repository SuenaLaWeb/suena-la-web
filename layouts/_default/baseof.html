<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ .Title }} - Suena La Web VE</title>

    {{ partial "favicons.html" . }}

    {{/* Enlaza el CSS principal de Tailwind/PostCSS */}}
    {{/* ESTRATEGIA ROBUSTA PARA LOCAL VS. PRODUCCIÓN */}}
    {{ $mainCss := resources.Get "css/main.css" | postCSS (dict "config" "./postcss.config.js") }}
    {{ if hugo.IsProduction }}
        {{ $mainCss = $mainCss | minify | fingerprint }}
        <link rel="stylesheet" href="{{ $mainCss.RelPermalink }}" integrity="{{ $mainCss.Data.Integrity }}">
    {{ else }}
        {{/* Si NO es producción (es decir, desarrollo local) */}}
        <link rel="stylesheet" href="{{ "/css/main.css" | relURL }}">
        {{ end }}

    {{/* Enlace al favicon */}}
    <link rel="icon" href="{{ "/favicon.ico" | relURL }}">

</head>
<body class="antialiased dark">

    {{- partial "header.html" . -}}
    <div id="main-content">
        {{ block "main" . }}{{ end }}
    </div>
    {{- partial "footer.html" . -}}
    {{- partial "player.html" . -}}

    {{/* Enlaza el JavaScript principal */}}
    {{/* Aplica minify y fingerprint SOLO en producción (similar al CSS) */}}
    {{ $mainJs := resources.Get "js/main.js" | js.Build }}
    {{ if hugo.IsProduction }}
        {{ $mainJs = $mainJs | minify | fingerprint }}
        <script src="{{ $mainJs.RelPermalink }}" integrity="{{ $mainJs.Data.Integrity }}"></script>
    {{ else }}
        {{/* Si NO es producción (desarrollo local) */}}
        <script src="{{ "/js/main.js" | relURL }}"></script>
    {{ end }}

</body>
</html>